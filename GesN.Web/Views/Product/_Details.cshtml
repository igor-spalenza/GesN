@using GesN.Web.Models.ViewModels.Production
@model ProductDetailsViewModel

<div class="container-fluid">
    <!-- Informações Básicas -->
    <div class="card">
        <div class="card-header">
            <h6 class="card-title mb-0">
                <i class="fas fa-box"></i> Informações Básicas
            </h6>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <dl class="row">
                        <dt class="col-sm-4">SKU:</dt>
                        <dd class="col-sm-8">
                            @if (!string.IsNullOrEmpty(Model.SKU))
                            {
                                <code class="text-primary">@Model.SKU</code>
                            }
                            else
                            {
                                <span class="text-muted">Não informado</span>
                            }
                        </dd>
                        
                        <dt class="col-sm-4">Nome:</dt>
                        <dd class="col-sm-8"><strong>@Model.Name</strong></dd>
                        
                        <dt class="col-sm-4">Tipo:</dt>
                        <dd class="col-sm-8">
                            @switch (Model.ProductType)
                            {
                                case ProductType.Simple:
                                    <span class="badge bg-info">@Model.ProductTypeDisplay</span>
                                    break;
                                case ProductType.Composite:
                                    <span class="badge bg-warning">@Model.ProductTypeDisplay</span>
                                    break;
                                case ProductType.Group:
                                    <span class="badge bg-secondary">@Model.ProductTypeDisplay</span>
                                    break;
                            }
                        </dd>
                        
                        <dt class="col-sm-4">Categoria:</dt>
                        <dd class="col-sm-8">
                            @if (!string.IsNullOrEmpty(Model.CategoryName))
                            {
                                <span class="badge bg-light text-dark">@Model.CategoryName</span>
                            }
                            else
                            {
                                <span class="text-muted">Não informada</span>
                            }
                        </dd>
                        
                        <dt class="col-sm-4">Status:</dt>
                        <dd class="col-sm-8">
                            @if (Model.StateCode == 1)
                            {
                                <span class="badge bg-success">Ativo</span>
                            }
                            else
                            {
                                <span class="badge bg-danger">Inativo</span>
                            }
                        </dd>
                    </dl>
                </div>
                <div class="col-md-6">
                    <dl class="row">
                        <dt class="col-sm-4">Preço:</dt>
                        <dd class="col-sm-8">
                            @if (Model.Price > 0)
                            {
                                <span class="fw-bold text-success">@Model.PriceDisplay</span>
                            }
                            else
                            {
                                <span class="text-muted">Não informado</span>
                            }
                        </dd>
                        
                        <dt class="col-sm-4">Preço Unitário:</dt>
                        <dd class="col-sm-8">
                            @if (Model.UnitPrice > 0)
                            {
                                <span class="fw-bold text-info">@Model.UnitPriceDisplay</span>
                            }
                            else
                            {
                                <span class="text-muted">Não informado</span>
                            }
                        </dd>
                        
                        <dt class="col-sm-4">Custo:</dt>
                        <dd class="col-sm-8">
                            @if (Model.Cost > 0)
                            {
                                <span class="text-warning">@Model.CostDisplay</span>
                            }
                            else
                            {
                                <span class="text-muted">Não informado</span>
                            }
                        </dd>
                        
                        <dt class="col-sm-4">Qtd. Preço:</dt>
                        <dd class="col-sm-8">
                            @if (Model.QuantityPrice > 0)
                            {
                                <span class="badge bg-secondary">@Model.QuantityPrice</span>
                            }
                            else
                            {
                                <span class="text-muted">Não informado</span>
                            }
                        </dd>

                        @if (!string.IsNullOrEmpty(Model.ImageUrl))
                        {
                            <dt class="col-sm-4">Imagem:</dt>
                            <dd class="col-sm-8">
                                <a href="@Model.ImageUrl" target="_blank" class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-image"></i> Ver Imagem
                                </a>
                            </dd>
                        }
                    </dl>
                </div>
            </div>
            
            @if (!string.IsNullOrEmpty(Model.Description))
            {
                <div class="row mt-3">
                    <div class="col-12">
                        <dt>Descrição:</dt>
                        <dd class="mt-1">@Model.Description</dd>
                    </div>
                </div>
            }

            @if (!string.IsNullOrEmpty(Model.Note))
            {
                <div class="row mt-3">
                    <div class="col-12">
                        <dt>Observações:</dt>
                        <dd class="mt-1">@Model.Note</dd>
                    </div>
                </div>
            }
        </div>
    </div>

    <!-- Informações de Montagem -->
    <div class="card mt-3">
        <div class="card-header">
            <h6 class="card-title mb-0">
                <i class="fas fa-tools"></i> Informações de Montagem
            </h6>
        </div>
        <div class="card-body">
            <dl class="row">
                <dt class="col-sm-3">Tempo de Montagem:</dt>
                <dd class="col-sm-4">
                    @if (Model.AssemblyTime > 0)
                    {
                        <span class="badge bg-info">@Model.AssemblyTimeDisplay</span>
                    }
                    else
                    {
                        <span class="text-muted">Não requer montagem</span>
                    }
                </dd>
            </dl>
            
            @if (!string.IsNullOrEmpty(Model.AssemblyInstructions))
            {
                <div class="row mt-3">
                    <div class="col-12">
                        <dt>Instruções de Montagem:</dt>
                        <dd class="mt-1">@Model.AssemblyInstructions</dd>
                    </div>
                </div>
            }
            
            @if (Model.ProductType == ProductType.Composite)
            {
                <div class="mt-3">
                    <button type="button" class="btn btn-outline-info btn-sm" 
                            onclick="productManager.gerenciarComponentes('@Model.Id')">
                        <i class="fas fa-cogs"></i> Gerenciar Componentes
                    </button>
                </div>
            }
        </div>
    </div>

    <!-- Informações de Auditoria -->
    <div class="card mt-3">
        <div class="card-header">
            <h6 class="card-title mb-0">
                <i class="fas fa-history"></i> Informações de Auditoria
            </h6>
        </div>
        <div class="card-body">
            <dl class="row">
                <dt class="col-sm-3">Data de Criação:</dt>
                <dd class="col-sm-4">@Model.FormattedCreatedAt</dd>
                
                <dt class="col-sm-3">Última Modificação:</dt>
                <dd class="col-sm-2">@Model.FormattedModifiedAt</dd>
            </dl>
        </div>
    </div>
</div>

<div class="modal-footer">
    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
        <i class="fas fa-times"></i> Fechar
    </button>
    <button type="button" class="btn btn-warning" onclick="productManager.editarProduct('@Model.Id')">
        <i class="fas fa-edit"></i> Editar
    </button>
    @if (Model.ProductType == ProductType.Composite)
    {
        <button type="button" class="btn btn-info" onclick="productManager.gerenciarComponentes('@Model.Id')">
            <i class="fas fa-cogs"></i> Componentes
        </button>
    }
    @if (Model.ProductType == ProductType.Group)
    {
        <button type="button" class="btn btn-secondary" onclick="productManager.gerenciarGrupo('@Model.Id')">
            <i class="fas fa-layer-group"></i> Gerenciar Grupo
        </button>
    }
</div> 